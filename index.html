<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATHENA Pro Generator v3.0 - Revolution Trading Pros</title>
    <style>
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
        }
        
        :root {
            --primary: #667eea;
            --primary-dark: #5a67d8;
            --secondary: #764ba2;
            --success: #48bb78;
            --warning: #f6ad55;
            --danger: #fc8181;
            --dark: #2d3748;
            --light: #f7fafc;
            --border: #e2e8f0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.25);
            overflow: hidden;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 50px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 30s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .header h1 {
            font-size: 48px;
            margin-bottom: 12px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 20px;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }
        
        .version-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            margin-top: 10px;
        }
        
        .main-content {
            padding: 40px;
        }
        
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }
        
        .toolbar-left {
            display: flex;
            gap: 10px;
        }
        
        .toolbar-right {
            display: flex;
            gap: 10px;
        }
        
        .toolbar-btn {
            padding: 8px 16px;
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .toolbar-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .phase-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border);
            padding-bottom: 10px;
        }
        
        .phase-tab {
            padding: 14px 28px;
            background: var(--light);
            border: none;
            border-radius: 12px 12px 0 0;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            color: #666;
            position: relative;
        }
        
        .phase-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .phase-tab:hover:not(.active) {
            background: #e0e0e0;
            transform: translateY(-2px);
        }
        
        .phase-tab .badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--success);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
        }
        
        .phase-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .phase-content.active {
            display: block;
        }
        
        .instructions {
            background: linear-gradient(135deg, #e8f4fd 0%, #f0f8ff 100%);
            border-left: 4px solid #2196f3;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.1);
        }
        
        .instructions h3 {
            color: #1976d2;
            margin-bottom: 16px;
            font-size: 20px;
        }
        
        .instructions ol {
            margin-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
            color: #333;
        }
        
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-group.required label::after {
            content: ' *';
            color: var(--danger);
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 14px;
        }
        
        .label-hint {
            font-weight: normal;
            color: #666;
            font-size: 12px;
            margin-left: 8px;
        }
        
        input[type="text"], 
        input[type="url"], 
        textarea, 
        select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s;
            background: white;
        }
        
        input:focus, 
        textarea:focus, 
        select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }
        
        .input-with-counter {
            position: relative;
        }
        
        .char-counter {
            position: absolute;
            bottom: -20px;
            right: 0;
            font-size: 12px;
            color: #666;
        }
        
        .char-counter.warning {
            color: var(--warning);
        }
        
        .char-counter.danger {
            color: var(--danger);
        }
        
        textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        .large-textarea {
            min-height: 400px;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.8;
            background: #fafafa;
        }
        
        .output-textarea {
            min-height: 600px;
            background: #f8f9fa;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 12px;
        }
        
        .generate-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .generate-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .generate-btn:hover::before {
            width: 100%;
            height: 100%;
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.4);
        }
        
        .generate-btn:active {
            transform: scale(0.98);
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .copy-btn {
            background: var(--success);
            color: white;
        }
        
        .copy-btn:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(72, 187, 120, 0.3);
        }
        
        .claude-btn {
            background: #ff6b35;
            color: white;
        }
        
        .claude-btn:hover {
            background: #ff5722;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
        }
        
        .download-btn {
            background: #007bff;
            color: white;
        }
        
        .download-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
        }
        
        .preview-btn {
            background: var(--secondary);
            color: white;
        }
        
        .preview-btn:hover {
            background: #693d8f;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(118, 75, 162, 0.3);
        }
        
        .status {
            padding: 16px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            display: none;
            font-weight: 500;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .status.show { 
            display: block; 
        }
        
        .status.success {
            background: linear-gradient(135deg, #d4edda 0%, #c3e8ce 100%);
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c2c7 100%);
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: linear-gradient(135deg, #d1ecf1 0%, #b8daff 100%);
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .output-section {
            display: none;
            margin-top: 40px;
            padding-top: 40px;
            border-top: 2px solid var(--border);
        }
        
        .output-section.show {
            display: block;
        }
        
        .output-section h3 {
            color: var(--dark);
            margin-bottom: 16px;
            font-size: 24px;
        }
        
        .workflow-arrow {
            text-align: center;
            margin: 30px 0;
            font-size: 32px;
            color: var(--primary);
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(10px); }
        }
        
        .meta-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .meta-grid {
                grid-template-columns: 1fr;
            }
        }

        .audio-section {
            background: linear-gradient(135deg, #f7faff 0%, #e8f4fd 100%);
            border: 2px solid var(--primary);
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
        }

        .audio-section h4 {
            color: #1976d2;
            margin-bottom: 16px;
            font-size: 18px;
        }

        .audio-tip {
            font-size: 14px;
            color: #666;
            margin-top: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-left: 4px solid #ffc107;
            padding: 16px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(255, 193, 7, 0.2);
        }
        
        .warning-box strong {
            color: #856404;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
            transition: width 0.3s ease;
            width: 0;
        }
        
        .preview-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            padding: 20px;
            overflow: auto;
        }
        
        .preview-modal.show {
            display: block;
        }
        
        .preview-content {
            background: white;
            max-width: 1200px;
            margin: 0 auto;
            border-radius: 12px;
            padding: 40px;
            position: relative;
        }
        
        .preview-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--danger);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .preview-close:hover {
            background: #e53e3e;
            transform: scale(1.1);
        }
        
        .saved-drafts {
            margin-top: 30px;
            padding: 20px;
            background: var(--light);
            border-radius: 10px;
        }
        
        .saved-drafts h4 {
            color: var(--dark);
            margin-bottom: 16px;
        }
        
        .draft-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        
        .draft-item:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transform: translateX(4px);
        }
        
        .draft-title {
            font-weight: 600;
            color: var(--dark);
        }
        
        .draft-date {
            font-size: 12px;
            color: #666;
        }
        
        .draft-actions {
            display: flex;
            gap: 8px;
        }
        
        .draft-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .load-draft {
            background: var(--primary);
            color: white;
        }
        
        .load-draft:hover {
            background: var(--primary-dark);
        }
        
        .delete-draft {
            background: var(--danger);
            color: white;
        }
        
        .delete-draft:hover {
            background: #e53e3e;
        }
        
        .seo-analyzer {
            background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .seo-analyzer h4 {
            color: var(--dark);
            margin-bottom: 16px;
        }
        
        .seo-score {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
        }
        
        .score-excellent {
            background: linear-gradient(135deg, var(--success), #38a169);
        }
        
        .score-good {
            background: linear-gradient(135deg, #f6ad55, #ed8936);
        }
        
        .score-poor {
            background: linear-gradient(135deg, var(--danger), #e53e3e);
        }
        
        .seo-tips {
            list-style: none;
            padding: 0;
        }
        
        .seo-tip-item {
            padding: 8px 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .tip-success {
            background: #c6f6d5;
            color: #22543d;
        }
        
        .tip-warning {
            background: #feebc8;
            color: #744210;
        }
        
        .tip-error {
            background: #fed7d7;
            color: #742a2a;
        }
        
        .helper-tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .helper-card {
            background: white;
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .helper-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }
        
        .helper-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .helper-title {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 4px;
        }
        
        .helper-desc {
            font-size: 12px;
            color: #666;
        }
        
        /* New styles for v3.0 */
        .advanced-options {
            background: linear-gradient(135deg, #fafafa 0%, #f0f0f0 100%);
            border: 2px solid var(--border);
            padding: 24px;
            border-radius: 12px;
            margin-top: 30px;
        }
        
        .advanced-options h4 {
            color: var(--dark);
            margin-bottom: 16px;
            font-size: 18px;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            font-weight: normal;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 32px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .toolbar {
                flex-direction: column;
                gap: 10px;
            }
            
            .toolbar-left,
            .toolbar-right {
                width: 100%;
                justify-content: center;
            }
            
            .phase-tabs {
                flex-wrap: wrap;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
            }
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark);
            color: white;
            text-align: center;
            padding: 8px;
            border-radius: 6px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .floating-save {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
            z-index: 100;
        }
        
        .floating-save:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ö° ATHENA Pro Generator</h1>
            <p>Billy Ribeiro Content System - Google 2025 E-E-A-T Optimized</p>
            <span class="version-badge">Version 3.0 Pro</span>
        </div>
        
        <div class="main-content">
            <div class="toolbar">
                <div class="toolbar-left">
                    <button class="toolbar-btn" onclick="saveDraft()">
                        üíæ Save Draft
                    </button>
                    <button class="toolbar-btn" onclick="showDrafts()">
                        üìÇ Load Draft
                    </button>
                    <button class="toolbar-btn" onclick="clearAll()">
                        üóëÔ∏è Clear All
                    </button>
                </div>
                <div class="toolbar-right">
                    <button class="toolbar-btn" onclick="showHelp()">
                        ‚ùì Help
                    </button>
                    <button class="toolbar-btn" onclick="showSettings()">
                        ‚öôÔ∏è Settings
                    </button>
                </div>
            </div>
            
            <div class="phase-tabs">
                <button class="phase-tab active" onclick="switchPhase('phase1', event)">
                    Phase 1: Generate Prompt
                    <span class="badge" id="phase1Badge" style="display: none;">‚úì</span>
                </button>
                <button class="phase-tab" onclick="switchPhase('phase2', event)">
                    Phase 2: Apply Template
                    <span class="badge" id="phase2Badge" style="display: none;">‚úì</span>
                </button>
                <button class="phase-tab" onclick="switchPhase('phase3', event)">
                    Phase 3: SEO & Preview
                </button>
            </div>
            
            <!-- PHASE 1 CONTENT - UPDATED -->
            <div id="phase1" class="phase-content active">
                <div class="instructions">
                    <h3>üìã Phase 1: Generate E-E-A-T Optimized Content Prompt</h3>
                    <ol>
                        <li>Enter your blog topic and complete keyword cluster</li>
                        <li>Add search intent and competition analysis</li>
                        <li>Configure advanced options for E-E-A-T optimization</li>
                        <li>Click "Generate Phase 1 Prompt"</li>
                        <li>Copy the prompt and paste into Claude.ai</li>
                        <li>Claude will generate professionally {{TAGGED}} content</li>
                        <li>Return and switch to Phase 2</li>
                    </ol>
                </div>
                
                <div class="warning-box">
                    <strong>‚ö†Ô∏è E-E-A-T CRITICAL:</strong> This version focuses on Experience, Expertise, Authority, and Trust. Be specific with examples, data, and personal insights.
                </div>
                
                <div class="form-group required">
                    <label for="topic">
                        üìù Blog Topic
                        <span class="label-hint">(Be specific - include angle and year)</span>
                    </label>
                    <input 
                        type="text" 
                        id="topic" 
                        placeholder="e.g., 3 Best Options Strategies for Passive Income: My 2025 Blueprint"
                        onkeyup="validatePhase1()"
                    >
                </div>
                
                <!-- Enhanced Keyword Section -->
                <div class="form-group required">
                    <label for="keyword">
                        üéØ Primary Keyword Phrase
                        <span class="label-hint">(Your main SEO target)</span>
                    </label>
                    <input 
                        type="text" 
                        id="keyword" 
                        placeholder="e.g., best options strategies for passive income"
                        onkeyup="validatePhase1()"
                    >
                </div>
                
                <div class="form-group">
                    <label for="secondaryKeywords">
                        üîó Secondary Keywords/Entities
                        <span class="label-hint">(Related concepts, comma-separated)</span>
                    </label>
                    <input 
                        type="text" 
                        id="secondaryKeywords" 
                        placeholder="e.g., covered calls, cash-secured puts, The Wheel Strategy, iron condors, selling premium"
                    >
                </div>
                
                <div class="form-group">
                    <label for="longtailQuestions">
                        ‚ùì Long-Tail Questions
                        <span class="label-hint">(User questions to answer, one per line)</span>
                    </label>
                    <textarea 
                        id="longtailQuestions" 
                        placeholder="how to generate monthly income from options&#10;is selling options a good way to make money&#10;safest options strategy for beginners&#10;how much capital to start selling options"
                        rows="4"
                    ></textarea>
                </div>
                
                <div class="form-group">
                    <label for="searchIntent">
                        üîç Search Intent Analysis
                        <span class="label-hint">(What the reader really wants)</span>
                    </label>
                    <textarea 
                        id="searchIntent" 
                        placeholder="e.g., User wants actionable, reliable options strategies for income, understands the risks, and seeks a trustworthy expert to guide them"
                    ></textarea>
                </div>
                
                <div class="form-group">
                    <label for="competitorUrls">
                        üèÜ Competitor URLs
                        <span class="label-hint">(Articles to outrank - one per line)</span>
                    </label>
                    <textarea 
                        id="competitorUrls" 
                        placeholder="https://example.com/similar-article-1&#10;https://example.com/similar-article-2"
                        rows="3"
                    ></textarea>
                </div>
                
                <div class="form-group">
                    <label for="contentStyle">
                        ‚úçÔ∏è Content Style
                    </label>
                    <select id="contentStyle">
                        <option value="professional">Professional & Authoritative</option>
                        <option value="conversational" selected>Conversational Expert</option>
                        <option value="technical">Technical & Data-Driven</option>
                        <option value="beginner">Beginner-Friendly</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="targetLength">
                        üìè Target Word Count
                    </label>
                    <select id="targetLength">
                        <option value="2500">2,500 words (Standard)</option>
                        <option value="3500" selected>3,500 words (Comprehensive)</option>
                        <option value="5000">5,000 words (Ultimate Guide)</option>
                        <option value="7500">7,500 words (Pillar Content)</option>
                    </select>
                </div>
                
                <!-- Advanced Options Section -->
                <div class="advanced-options">
                    <h4>üöÄ Advanced E-E-A-T Options</h4>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="includeExamples" checked>
                        <label for="includeExamples">Include specific trade examples with math/calculations</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="includeRules" checked>
                        <label for="includeRules">Add "Billy's Rules" for each strategy</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="includeWarnings" checked>
                        <label for="includeWarnings">Include risk warnings and "Who this is NOT for" sections</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="includeData" checked>
                        <label for="includeData">Request specific data, percentages, and statistics</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="includeVisuals">
                        <label for="includeVisuals">Include visual element descriptions (charts, tables)</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="includeScaling">
                        <label for="includeScaling">Add scaling/progression roadmap</label>
                    </div>
                </div>
                
                <div class="helper-tools">
                    <div class="helper-card" onclick="generateTitleIdeas()">
                        <div class="helper-icon">üí°</div>
                        <div class="helper-title">Title Ideas</div>
                        <div class="helper-desc">Generate title suggestions</div>
                    </div>
                    <div class="helper-card" onclick="analyzeKeyword()">
                        <div class="helper-icon">üîç</div>
                        <div class="helper-title">Keyword Analysis</div>
                        <div class="helper-desc">Check keyword viability</div>
                    </div>
                    <div class="helper-card" onclick="generateOutline()">
                        <div class="helper-icon">üìë</div>
                        <div class="helper-title">Quick Outline</div>
                        <div class="helper-desc">Create content structure</div>
                    </div>
                    <div class="helper-card" onclick="findLSIKeywords()">
                        <div class="helper-icon">üéØ</div>
                        <div class="helper-title">LSI Keywords</div>
                        <div class="helper-desc">Find related keywords</div>
                    </div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="phase1Progress"></div>
                </div>
                
                <button class="generate-btn" onclick="generatePhase1Prompt()" id="phase1GenerateBtn">
                    üöÄ Generate E-E-A-T Optimized Prompt
                </button>
                
                <div id="phase1Status" class="status"></div>
                
                <div id="phase1Output" class="output-section">
                    <h3>üìÑ Your E-E-A-T Optimized Phase 1 Prompt</h3>
                    <p style="margin: 10px 0; color: #666;">Copy this enhanced prompt and paste into Claude.ai:</p>
                    <textarea id="promptOutput" class="output-textarea" readonly></textarea>
                    
                    <div class="button-group">
                        <button class="action-btn copy-btn" onclick="copyContent('promptOutput')">
                            üìã Copy Prompt
                        </button>
                        <button class="action-btn claude-btn" onclick="openClaude()">
                            ü§ñ Open Claude.ai
                        </button>
                        <button class="action-btn download-btn" onclick="downloadPrompt()">
                            üíæ Save Prompt
                        </button>
                    </div>
                    
                    <div class="workflow-arrow">‚¨áÔ∏è</div>
                    <p style="text-align: center; color: #666; font-size: 18px;">
                        After getting tagged content from Claude, click <strong>Phase 2</strong> above
                    </p>
                </div>
            </div>
            
            <!-- PHASE 2 CONTENT - Keep existing but update for new tags -->
            <div id="phase2" class="phase-content">
                <div class="instructions">
                    <h3>üìã Phase 2: Convert to WordPress HTML</h3>
                    <ol>
                        <li>Paste the complete {{TAGGED}} content from Claude</li>
                        <li>System will auto-extract meta description and keywords</li>
                        <li>Add audio URL from ElevenLabs (highly recommended)</li>
                        <li>Click "Generate Complete HTML"</li>
                        <li>Preview, then copy HTML and paste into WordPress</li>
                    </ol>
                </div>
                
                <div class="warning-box">
                    <strong>‚ö†Ô∏è IMPORTANT:</strong> Make sure you paste ALL tagged content including new tags like {{EXECUTIVE_SUMMARY_TLDR}}, {{DISCLAIMER}}, {{AUTHOR_BIO}}, etc.
                </div>
                
                <div class="form-group required">
                    <label for="taggedContent">
                        üìù Paste Complete Tagged Content from Claude
                        <span class="label-hint">(All {{TAGGED}} output including new E-E-A-T tags)</span>
                    </label>
                    <textarea 
                        id="taggedContent" 
                        class="large-textarea"
                        placeholder="{{TITLE}}: Your title here&#10;{{META_DESCRIPTION}}: Your meta description&#10;{{EXECUTIVE_SUMMARY_TLDR}}: Your TLDR summary&#10;{{DISCLAIMER}}: Your disclaimer&#10;{{AUTHOR_BIO}}: Your custom bio&#10;..."
                        onkeyup="validatePhase2()"
                    ></textarea>
                </div>
                
                <div class="meta-grid">
                    <div class="form-group">
                        <label for="slug">
                            üîó URL Slug
                            <span class="label-hint">(Auto-generated from title)</span>
                        </label>
                        <input 
                            type="text" 
                            id="slug" 
                            placeholder="auto-generated-from-title"
                            onkeyup="sanitizeSlug()"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="publishDate">
                            üìÖ Publish Date
                            <span class="label-hint">(For schema markup)</span>
                        </label>
                        <input 
                            type="text" 
                            id="publishDate" 
                            value=""
                            placeholder="Auto-fills with today's date"
                        >
                    </div>
                </div>

                <div class="audio-section">
                    <h4>üéß Audio Version (Highly Recommended for Engagement)</h4>
                    <div class="form-group">
                        <label for="audioUrl">Audio File URL</label>
                        <input 
                            type="url" 
                            id="audioUrl" 
                            placeholder="https://revolutiontradingpros.com/wp-content/uploads/2025/01/blog-audio.mp3"
                        >
                        <div class="audio-tip">
                            <strong>üí° AUDIO WORKFLOW:</strong><br>
                            1. Copy all blog text content (without HTML)<br>
                            2. Go to ElevenLabs and generate audio using Billy's voice<br>
                            3. Download the MP3 file<br>
                            4. Upload to WordPress Media Library<br>
                            5. Copy the file URL and paste it here<br>
                            <span style="color: #d73502;">üìç Audio player will appear right after social links</span>
                        </div>
                    </div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="phase2Progress"></div>
                </div>
                
                <button class="generate-btn" onclick="generateHTML()" id="phase2GenerateBtn">
                    üöÄ Generate Complete E-E-A-T Optimized HTML
                </button>
                
                <div id="phase2Status" class="status"></div>
                
                <div id="phase2Output" class="output-section">
                    <h3>‚úÖ Your Complete E-E-A-T Optimized HTML Blog Post</h3>
                    <p style="margin: 10px 0; color: #666;">Ready to paste into WordPress (Text/HTML editor):</p>
                    <textarea id="htmlOutput" class="output-textarea" readonly></textarea>
                    
                    <div class="button-group">
                        <button class="action-btn copy-btn" onclick="copyContent('htmlOutput')">
                            üìã Copy HTML
                        </button>
                        <button class="action-btn preview-btn" onclick="previewHTML()">
                            üëÅÔ∏è Preview
                        </button>
                        <button class="action-btn download-btn" onclick="downloadHTML()">
                            üíæ Download HTML
                        </button>
                    </div>
                    
                    <div class="workflow-arrow">‚¨áÔ∏è</div>
                    <p style="text-align: center; color: #666; font-size: 18px;">
                        Want to optimize further? Check <strong>Phase 3: SEO & Preview</strong>
                    </p>
                </div>
            </div>
            
            <!-- PHASE 3 CONTENT - Keep existing -->
            <div id="phase3" class="phase-content">
                <div class="instructions">
                    <h3>üéØ Phase 3: SEO Optimization & Final Preview</h3>
                    <p>Analyze your E-E-A-T optimized content before publishing</p>
                </div>
                
                <div class="seo-analyzer">
                    <h4>E-E-A-T & SEO Analysis</h4>
                    <div class="seo-score">
                        <div class="score-circle score-excellent" id="seoScoreCircle">
                            <span id="seoScoreValue">0</span>
                        </div>
                        <div>
                            <h5 id="seoScoreLabel">Not Analyzed</h5>
                            <p style="color: #666; font-size: 14px;">Generate HTML in Phase 2 first</p>
                        </div>
                    </div>
                    <ul class="seo-tips" id="seoTips">
                        <!-- SEO tips will be populated here -->
                    </ul>
                    <button class="action-btn copy-btn" onclick="analyzeSEO()" style="margin-top: 16px;">
                        üîç Analyze E-E-A-T & SEO
                    </button>
                </div>
                
                <div class="saved-drafts">
                    <h4>üìÅ Saved Drafts</h4>
                    <div id="draftsList">
                        <p style="color: #666;">No saved drafts yet</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Preview Modal -->
    <div class="preview-modal" id="previewModal">
        <div class="preview-content">
            <button class="preview-close" onclick="closePreview()">‚úï</button>
            <div id="previewFrame"></div>
        </div>
    </div>
    
    <!-- Floating Save Button -->
    <div class="floating-save tooltip" onclick="quickSave()">
        üíæ
        <span class="tooltiptext">Quick Save Draft</span>
    </div>
    
    <script type="text/javascript">
        // Constants - Trading Room Cards HTML (exact copy from v2)
        const TRADING_ROOM_CARDS = `<div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 20px; font-family: 'Montserrat', sans-serif;">
<div style="border: 1px solid #e0e0e0; background-color: #ffffff; border-radius: 10px; padding: 18px; text-align: center; width: 38%; min-width: 240px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)'; this.style.borderColor='#3366ff'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)'; this.style.borderColor='#e0e0e0'">
<div style="font-size: 34px; color: #3366ff; margin-bottom: 8px;">üìà</div>
<h3 style="margin: 6px 0; font-size: 1.1em; font-weight: 600; color: #333333;">Day Trading Room</h3>
<p style="font-size: 0.85em; color: #666; min-height: 48px;">For active traders seeking real-time setups and live market analysis.</p>
<a style="text-decoration: none; color: #ffffff; background-color: #3366ff; padding: 10px 20px; border-radius: 5px; font-weight: 600; display: inline-block; line-height: 1.2; text-align: center; font-size: 0.9em; min-width: 120px; transition: 0.3s; box-shadow: rgba(51, 102, 255, 0.2) 0px 2px 4px;" href="https://revolutiontradingpros.com/day-trading/" onmouseover="this.style.backgroundColor='#2952cc'" onmouseout="this.style.backgroundColor='#3366ff'">Learn More</a>
</div>
<div style="border: 1px solid #e0e0e0; background-color: #ffffff; border-radius: 10px; padding: 18px; text-align: center; width: 38%; min-width: 240px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)'; this.style.borderColor='#3366ff'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)'; this.style.borderColor='#e0e0e0'">
<div style="font-size: 34px; color: #3366ff; margin-bottom: 8px;">üìä</div>
<h3 style="margin: 6px 0; font-size: 1.1em; font-weight: 600; color: #333333;">Swing Trading Room</h3>
<p style="font-size: 0.85em; color: #666; min-height: 48px;">For part-time traders focused on short-term moves over days or weeks.</p>
<a style="text-decoration: none; color: #ffffff; background-color: #3366ff; padding: 10px 20px; border-radius: 5px; font-weight: 600; display: inline-block; line-height: 1.2; text-align: center; font-size: 0.9em; min-width: 120px; transition: 0.3s; box-shadow: rgba(51, 102, 255, 0.2) 0px 2px 4px;" href="https://revolutiontradingpros.com/swing-trading/" onmouseover="this.style.backgroundColor='#2952cc'" onmouseout="this.style.backgroundColor='#3366ff'">Learn More</a>
</div>
<div style="border: 1px solid #e0e0e0; background-color: #ffffff; border-radius: 10px; padding: 18px; text-align: center; width: 38%; min-width: 240px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)'; this.style.borderColor='#3366ff'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)'; this.style.borderColor='#e0e0e0'">
<div style="font-size: 34px; color: #3366ff; margin-bottom: 8px;">üéØ</div>
<h3 style="margin: 6px 0; font-size: 1.1em; font-weight: 600; color: #333333;">Small Account Mentorship</h3>
<p style="font-size: 0.85em; color: #666; min-height: 48px;">1-on-1 coaching to build the discipline and strategy to grow a small account.</p>
<a style="text-decoration: none; color: #ffffff; background-color: #3366ff; padding: 10px 20px; border-radius: 5px; font-weight: 600; display: inline-block; line-height: 1.2; text-align: center; font-size: 0.9em; min-width: 120px; transition: 0.3s; box-shadow: rgba(51, 102, 255, 0.2) 0px 2px 4px;" href="https://revolutiontradingpros.com/small-account/" onmouseover="this.style.backgroundColor='#2952cc'" onmouseout="this.style.backgroundColor='#3366ff'">Learn More</a>
</div>
<div style="border: 1px solid #e0e0e0; background-color: #ffffff; border-radius: 10px; padding: 18px; text-align: center; width: 38%; min-width: 240px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)'; this.style.borderColor='#3366ff'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)'; this.style.borderColor='#e0e0e0'">
<div style="font-size: 34px; color: #3366ff; margin-bottom: 8px;">‚ö°</div>
<h3 style="margin: 6px 0; font-size: 1.1em; font-weight: 600; color: #333333;">SPX Profit Pulse Alerts</h3>
<p style="font-size: 0.85em; color: #666; min-height: 48px;">Get our highest-conviction trade ideas for 0DTE SPX options.</p>
<a style="text-decoration: none; color: #ffffff; background-color: #3366ff; padding: 10px 20px; border-radius: 5px; font-weight: 600; display: inline-block; line-height: 1.2; text-align: center; font-size: 0.9em; min-width: 120px; transition: 0.3s; box-shadow: rgba(51, 102, 255, 0.2) 0px 2px 4px;" href="https://revolutiontradingpros.com/spx-profit-pulse/" onmouseover="this.style.backgroundColor='#2952cc'" onmouseout="this.style.backgroundColor='#3366ff'">Explore Alerts</a>
</div>
<div style="border: 1px solid #e0e0e0; background-color: #ffffff; border-radius: 10px; padding: 18px; text-align: center; width: 38%; min-width: 240px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 25px rgba(0,0,0,0.15)'; this.style.borderColor='#3366ff'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)'; this.style.borderColor='#e0e0e0'">
<div style="font-size: 34px; color: #3366ff; margin-bottom: 8px;">üí°</div>
<h3 style="margin: 6px 0; font-size: 1.1em; font-weight: 600; color: #333333;">Explosive Swing Alerts</h3>
<p style="font-size: 0.85em; color: #666; min-height: 48px;">Actionable, alerts-only service for our flagship explosive swing trade setups.</p>
<a style="text-decoration: none; color: #ffffff; background-color: #3366ff; padding: 10px 20px; border-radius: 5px; font-weight: 600; display: inline-block; line-height: 1.2; text-align: center; font-size: 0.9em; min-width: 120px; transition: 0.3s; box-shadow: rgba(51, 102, 255, 0.2) 0px 2px 4px;" href="https://revolutiontradingpros.com/explosive-swing/" onmouseover="this.style.backgroundColor='#2952cc'" onmouseout="this.style.backgroundColor='#3366ff'">Explore Alerts</a>
</div>
</div>`;

        // Initialize on load
        window.addEventListener('load', function() {
            loadAutoSave();
            updateDraftsList();
            setTodayDate();
        });
        
        // Set today's date
        function setTodayDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('publishDate').value = today;
        }

        // Auto-save every 30 seconds
        setInterval(function() {
            autoSave();
        }, 30000);

        // Phase switching
        function switchPhase(phase, event) {
            document.querySelectorAll('.phase-tab').forEach(function(tab) {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('.phase-content').forEach(function(content) {
                content.classList.remove('active');
            });
            document.getElementById(phase).classList.add('active');
            
            updateOverallProgress();
        }

        // Validation functions
        function validatePhase1() {
            const topic = document.getElementById('topic').value.trim();
            const keyword = document.getElementById('keyword').value.trim();
            const btn = document.getElementById('phase1GenerateBtn');
            
            if (topic && keyword) {
                btn.style.opacity = '1';
                btn.style.cursor = 'pointer';
                updateProgress('phase1Progress', 100);
            } else {
                btn.style.opacity = '0.6';
                btn.style.cursor = 'not-allowed';
                updateProgress('phase1Progress', 50);
            }
        }

        function validatePhase2() {
            const content = document.getElementById('taggedContent').value.trim();
            const btn = document.getElementById('phase2GenerateBtn');
            
            if (content && content.includes('{{TITLE}}')) {
                btn.style.opacity = '1';
                btn.style.cursor = 'pointer';
                updateProgress('phase2Progress', 100);
            } else {
                btn.style.opacity = '0.6';
                btn.style.cursor = 'not-allowed';
                updateProgress('phase2Progress', content ? 50 : 0);
            }
        }

        // Progress update
        function updateProgress(barId, percent) {
            document.getElementById(barId).style.width = percent + '%';
        }

        function updateOverallProgress() {
            const phase1Done = document.getElementById('promptOutput').value ? true : false;
            const phase2Done = document.getElementById('htmlOutput').value ? true : false;
            
            document.getElementById('phase1Badge').style.display = phase1Done ? 'inline' : 'none';
            document.getElementById('phase2Badge').style.display = phase2Done ? 'inline' : 'none';
        }

        // Slug sanitization
        function sanitizeSlug() {
            const slugField = document.getElementById('slug');
            slugField.value = slugField.value
                .toLowerCase()
                .replace(/[^\w\s-]/g, '')
                .replace(/\s+/g, '-')
                .replace(/--+/g, '-')
                .trim();
        }

        // Helper tools
        function generateTitleIdeas() {
            const topic = document.getElementById('topic').value.trim();
            if (!topic) {
                showStatus('phase1Status', 'error', 'Please enter a topic first');
                return;
            }
            
            const ideas = [
                topic + ': Complete Guide for 2025',
                'How to Master ' + topic + ' (My Blueprint After 15+ Years)',
                topic + ': What Actually Works in 2025',
                'The Truth About ' + topic + ' Nobody Tells You',
                topic + ': Professional Strategies Revealed',
                'My ' + topic + ' System (How I Scaled to $X Monthly)'
            ];
            
            const ideasText = ideas.join('\n');
            alert('E-E-A-T Optimized Title Ideas:\n\n' + ideasText);
        }

        function analyzeKeyword() {
            const keyword = document.getElementById('keyword').value.trim();
            if (!keyword) {
                showStatus('phase1Status', 'error', 'Please enter a keyword first');
                return;
            }
            
            showStatus('phase1Status', 'info', 'Analyzing "' + keyword + '"... For E-E-A-T optimization, consider adding personal experience modifiers like "my system", "how I", "blueprint", etc.');
        }

        function generateOutline() {
            const topic = document.getElementById('topic').value.trim();
            if (!topic) {
                showStatus('phase1Status', 'error', 'Please enter a topic first');
                return;
            }
            
            const outline = '\nE-E-A-T Optimized Outline for: ' + topic + '\n\n' +
                '1. Executive Summary/TLDR (Above the fold)\n' +
                '2. Disclaimer & Author Bio (Build trust immediately)\n' +
                '3. Myth-Busting Introduction (Challenge assumptions)\n' +
                '4. Strategy #1 with Billy\'s Rules\n' +
                '   - Who this is for/not for\n' +
                '   - Specific example with math\n' +
                '   - Risk management protocol\n' +
                '5. Strategy #2 with Billy\'s Rules\n' +
                '   - Trade example with calculations\n' +
                '   - Common mistakes to avoid\n' +
                '6. Strategy #3 (Advanced)\n' +
                '   - Professional insights\n' +
                '   - Scaling considerations\n' +
                '7. Billy\'s Deep Contrarian Analysis\n' +
                '8. Critical Warnings & Risk Management\n' +
                '9. My Personal Evolution (Story/Journey)\n' +
                '10. FAQ Section (10+ questions)\n' +
                '11. Resources & Next Steps';
            
            alert(outline);
        }

        function findLSIKeywords() {
            const keyword = document.getElementById('keyword').value.trim();
            if (!keyword) {
                showStatus('phase1Status', 'error', 'Please enter a primary keyword first');
                return;
            }
            
            const lsiSuggestions = [
                keyword + ' for beginners',
                'best ' + keyword,
                keyword + ' strategies',
                'how to ' + keyword,
                keyword + ' tips',
                keyword + ' guide 2025',
                keyword + ' tutorial',
                keyword + ' examples',
                keyword + ' calculator',
                keyword + ' risks',
                'is ' + keyword + ' worth it',
                keyword + ' vs alternatives'
            ];
            
            alert('E-E-A-T LSI Keyword Suggestions:\n\n' + lsiSuggestions.join('\n'));
        }

        // WORKING Generate Phase 1 Prompt function
        function generatePhase1Prompt() {
            try {
                const topic = document.getElementById('topic').value.trim();
                const keyword = document.getElementById('keyword').value.trim();
                const secondaryKeywords = document.getElementById('secondaryKeywords').value.trim();
                const longtailQuestions = document.getElementById('longtailQuestions').value.trim();
                const searchIntent = document.getElementById('searchIntent').value.trim();
                const competitorUrls = document.getElementById('competitorUrls').value.trim();
                const contentStyle = document.getElementById('contentStyle').value;
                const targetLength = document.getElementById('targetLength').value;
                
                // Get advanced options
                const includeExamples = document.getElementById('includeExamples').checked;
                const includeRules = document.getElementById('includeRules').checked;
                const includeWarnings = document.getElementById('includeWarnings').checked;
                const includeData = document.getElementById('includeData').checked;
                const includeVisuals = document.getElementById('includeVisuals').checked;
                const includeScaling = document.getElementById('includeScaling').checked;
                
                if (!topic || !keyword) {
                    showStatus('phase1Status', 'error', 'Please enter both topic and keyword');
                    return;
                }
                
                // Build the prompt
                let prompt = '# ATHENA Pro E-E-A-T Content Generation - ' + targetLength + ' Words - 2025 SEO Optimized\n\n';
                prompt += '## TOPIC: ' + topic + '\n';
                prompt += '## PRIMARY KEYWORD PHRASE: ' + keyword + '\n';
                
                if (secondaryKeywords) {
                    prompt += '## SECONDARY KEYWORDS/ENTITIES: ' + secondaryKeywords + '\n';
                }
                
                if (longtailQuestions) {
                    prompt += '## LONG-TAIL QUESTIONS TO ANSWER:\n' + longtailQuestions + '\n';
                }
                
                prompt += '## SEARCH INTENT: ' + (searchIntent || 'User wants actionable, practical strategies with proven results from a trustworthy expert') + '\n';
                prompt += '## CONTENT STYLE: ' + contentStyle + '\n';
                
                if (competitorUrls) {
                    prompt += '## COMPETITOR REFERENCES TO OUTRANK:\n' + competitorUrls + '\n';
                }
                
                prompt += '\nCreate comprehensive, E-E-A-T optimized content with ALL of these tags (NEVER use em dashes ‚Äî):\n\n';
                prompt += '=== PART 1: SEO & METADATA ===\n';
                prompt += '{{TITLE}}: [SEO-optimized title with power words and year 2025]\n';
                prompt += '{{META_DESCRIPTION}}: [150-160 chars compelling meta description with keyword]\n';
                prompt += '{{HERO_IMAGE_DESC}}: [Detailed description for professional hero image that builds trust]\n\n';
                prompt += '{{KEYWORD_CLUSTER}}:\n';
                prompt += '- Primary: ' + keyword + '\n';
                prompt += '- Secondary: ' + (secondaryKeywords || '[Add 5-7 related entities]') + '\n';
                prompt += '- Long-tail: ' + (longtailQuestions ? longtailQuestions.replace(/\n/g, ', ') : '[Add 5-7 user questions]') + '\n\n';
                
                prompt += '=== PART 2: TRUST BUILDERS (Above the Fold) ===\n';
                prompt += '{{AUTHOR_BIO}}: [Custom author bio emphasizing 15+ years experience, institutional background with Mark McGoldrick, specific achievements, social proof]\n\n';
                prompt += '{{DISCLAIMER}}: [Professional disclaimer for YMYL content - "Not Financial Advice" etc.]\n\n';
                prompt += '{{EXECUTIVE_SUMMARY_TLDR}}: [3-4 sentence summary addressing the main promise, key strategies, and realistic expectations - "No time to read? Here\'s the bottom line..."]\n\n';
                prompt += '{{TAKEAWAY_1}} through {{TAKEAWAY_6}}: [Bold claim] | [Supporting explanation]\n\n';
                
                prompt += '=== PART 3: MAIN CONTENT ===\n';
                prompt += '{{SECTION_1_H2}}: [Myth-busting or problem-defining title]\n';
                prompt += '{{SECTION_1_CONTENT}}: [Set realistic expectations, address common misconceptions, build trust by being honest about challenges]\n';
                
                if (includeWarnings) {
                    prompt += '{{SECTION_1_WHO_FOR}}: [Explicitly state who this is for and NOT for]\n';
                }
                
                prompt += '\n{{SECTION_2_H2}}: [Strategy/Solution #1]\n';
                prompt += '{{SECTION_2_CONTENT}}: [Detailed explanation with mechanics]\n';
                
                if (includeRules) {
                    prompt += '{{BILLY_RULE_2}}: [Specific rule for this strategy - "Only do X if Y"]\n';
                }
                
                if (includeExamples) {
                    prompt += '{{TRADE_EXAMPLE_2}}: [Specific example with ticker, strikes, dates, premium, ROI calculation]\n';
                }
                
                prompt += '{{SECTION_2_RISK}}: [Risk management specific to this strategy]\n\n';
                prompt += '{{SECTION_3_H2}}: [Strategy/Solution #2]\n';
                prompt += '{{SECTION_3_CONTENT}}: [Detailed explanation]\n';
                
                if (includeRules) {
                    prompt += '{{BILLY_RULE_3}}: [Specific rule for this strategy]\n';
                }
                
                if (includeExamples) {
                    prompt += '{{TRADE_EXAMPLE_3}}: [Specific example with math and percentages]\n';
                }
                
                prompt += '{{SECTION_3_MISTAKES}}: [Common mistakes to avoid]\n\n';
                prompt += '{{SECTION_4_H2}}: [Strategy/Solution #3 - More Advanced]\n';
                prompt += '{{SECTION_4_CONTENT}}: [For experienced practitioners]\n';
                
                if (includeRules) {
                    prompt += '{{BILLY_RULE_4}}: [Advanced rule]\n';
                }
                
                if (includeData) {
                    prompt += '{{DATA_POINT_4}}: [Include specific statistics, win rates, averages]\n';
                }
                
                prompt += '\n{{SECTION_5_H2}}: [Implementation/Scaling/Tools]\n';
                prompt += '{{SECTION_5_CONTENT}}: [Practical implementation guide]\n';
                
                if (includeScaling) {
                    prompt += '{{SCALING_ROADMAP}}: [Progression from beginner to advanced with milestones]\n';
                }
                
                if (includeVisuals) {
                    prompt += '\n{{VISUAL_ELEMENT_1}} through {{VISUAL_ELEMENT_3}}: [Descriptions of charts, tables, or graphics to include]\n';
                }
                
                prompt += '\n=== PART 4: BILLY\'S UNIQUE INSIGHTS ===\n';
                prompt += '{{BILLY_TAKE_1}}: [Contrarian insight from 15+ years experience - challenge conventional wisdom]\n';
                prompt += '{{BILLY_TAKE_2}}: [Advanced technique that separates pros from amateurs]\n';
                prompt += '{{BILLY_TAKE_3}}: [Specific system or rule like "The 45 DTE Sweet Spot"]\n\n';
                prompt += '{{BILLY_DEEP_DIVE}}: [2-3 paragraph extended analysis on a controversial or complex aspect - show true expertise]\n\n';
                prompt += '{{CRITICAL_WARNING}}: [Warning title] | [Clear message about risks, capital requirements, or common pitfalls]\n\n';
                prompt += '{{PERSONAL_EVOLUTION}}: [Billy\'s journey with this topic - include specific losses, breakthroughs, lessons from Mark McGoldrick. Make it vulnerable and real. Include specific dollar amounts if relevant.]\n\n';
                
                prompt += '=== PART 5: FAQ & RESOURCES ===\n';
                prompt += '{{FAQ_Q1}} through {{FAQ_Q10}}: [Answer the actual questions users have, including tough ones about losses, taxes, realistic returns]\n\n';
                prompt += '{{RESOURCES_TABLE}}: [3-5 authoritative external resources with descriptions]\n\n';
                prompt += '{{SCHEMA_MARKUP_NOTES}}: [Notes for FAQ schema, Article schema, Author schema]\n\n';
                
                prompt += 'Requirements:\n';
                prompt += '- Write as Billy Ribeiro in first person - confident but not arrogant\n';
                prompt += '- Include specific examples: tickers (AAPL, SPX, etc.), percentages (aim for 1.5-2% monthly), dollar amounts\n';
                prompt += '- Reference "The Move Prior to The Move" system where relevant\n';
                prompt += '- Target exactly ' + targetLength + ' words\n';
                prompt += '- Make it actionable with clear next steps\n';
                prompt += '- Be transparent about risks and requirements\n';
                prompt += '- Use only hyphens (-) never em dashes (‚Äî)\n';
                
                if (includeData) {
                    prompt += '- Include specific data points, statistics, and percentages throughout\n';
                }
                
                if (includeExamples) {
                    prompt += '- Every strategy must have a detailed example with math/calculations\n';
                }
                
                prompt += '- Focus on building E-E-A-T: Experience (personal stories), Expertise (specific knowledge), Authority (credentials), Trust (transparency)';
                
                document.getElementById('promptOutput').value = prompt;
                document.getElementById('phase1Output').classList.add('show');
                document.getElementById('phase1Output').scrollIntoView({ behavior: 'smooth' });
                
                showStatus('phase1Status', 'success', 'E-E-A-T optimized prompt generated! Copy and paste into Claude.');
                document.getElementById('phase1Badge').style.display = 'inline';
                
                autoSave();
                
            } catch (error) {
                console.error('Error in generatePhase1Prompt:', error);
                showStatus('phase1Status', 'error', 'An error occurred. Please try again.');
            }
        }

        // Parse tagged content
        function parseTaggedContent(content) {
            const tags = {};
            const regex = /\{\{([^}]+)\}\}:\s*([^{]*(?:\{[^}]*\}[^{]*)*?)(?=\{\{|$)/gs;
            let match;
            
            while ((match = regex.exec(content)) !== null) {
                const tagName = match[1].trim();
                const tagContent = match[2].trim();
                tags[tagName] = tagContent;
            }
            
            return tags;
        }
        
        // Process content sections
        function processSection(content) {
            if (!content) return '';
            
            // Replace em dashes with regular hyphens
            content = content.replace(/‚Äî/g, '-');
            
            // Convert markdown bold to HTML
            let processed = content.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            
            // Convert line breaks to HTML
            processed = processed.replace(/\n\n+/g, '</span></p>\n<p><span style="color: #333333; font-family: Montserrat;">');
            processed = processed.replace(/\n/g, '<br>');
            
            return '<p><span style="color: #333333; font-family: Montserrat;">' + processed + '</span></p>';
        }
        
        // Generate slug
        function generateSlug(title) {
            return title
                .toLowerCase()
                .replace(/[^\w\s-]/g, '')
                .replace(/\s+/g, '-')
                .replace(/--+/g, '-')
                .trim();
        }
        
        // Generate HTML - This is a massive function, keeping core structure
        function generateHTML() {
            try {
                const taggedContent = document.getElementById('taggedContent').value.trim();
                
                if (!taggedContent) {
                    showStatus('phase2Status', 'error', 'Please paste the tagged content from Claude');
                    return;
                }
                
                // Remove em dashes
                const cleanContent = taggedContent.replace(/‚Äî/g, '-');
                const tags = parseTaggedContent(cleanContent);
                
                if (!tags.TITLE) {
                    showStatus('phase2Status', 'error', 'Missing {{TITLE}} tag. Make sure you pasted complete content.');
                    return;
                }
                
                // Extract meta description from tagged content or generate
                let metaDescription = tags.META_DESCRIPTION || tags.TITLE.substring(0, 160);
                
                let slug = document.getElementById('slug').value.trim() || generateSlug(tags.TITLE);
                
                const audioUrl = document.getElementById('audioUrl').value.trim();
                const audioHTML = audioUrl ? '\n[billy_audio mp3="' + audioUrl + '"]' : '';
                
                // Start building HTML
                let html = '<div style="font-family: Montserrat, sans-serif; color: #333333;">\n';
                
                // Add DISCLAIMER if present (top of page for YMYL)
                if (tags.DISCLAIMER) {
                    html += '<!-- TOP DISCLAIMER FOR YMYL CONTENT -->\n';
                    html += '<div style="background-color: #fff3cd; border: 2px solid #ffc107; padding: 20px; margin-bottom: 30px; border-radius: 10px;">\n';
                    html += '    <p style="font-weight: bold; color: #856404; margin: 0; font-size: 16px;">\n';
                    html += '        ‚ö†Ô∏è ' + tags.DISCLAIMER + '\n';
                    html += '    </p>\n';
                    html += '</div>\n';
                }
                
                // Add title
                html += '<h1 style="text-align: center; font-family: \'Montserrat\', sans-serif; color: #333333;"><span style="color: #333333;">' + (tags.TITLE || 'Your Title Here') + '</span></h1>\n\n';
                
                // Add hero image placeholder
                html += '<!-- HERO/FEATURED IMAGE PLACEHOLDER -->\n';
                html += '<div style="background: #f0f0f0; border: 2px dashed #666; padding: 30px; margin: 30px 0; text-align: center; border-radius: 8px;">\n';
                html += '    <p style="font-weight: bold; color: #333; font-size: 1.2em;">üñºÔ∏è FEATURED/HERO IMAGE</p>\n';
                html += '    <p style="color: #666;">Description: ' + (tags.HERO_IMAGE_DESC || 'Professional trading setup showing calm, focused analysis') + '</p>\n';
                html += '    <p style="color: #666;">Recommended Size: 1388 x 926 pixels</p>\n';
                html += '    <p style="color: #666;">Alt Text: ' + slug + '-hero-image</p>\n';
                html += '    <p style="color: #666;">Filename: ' + slug + '-hero.jpg</p>\n';
                html += '</div>\n';
                
                // Add author bio - custom or default
                if (tags.AUTHOR_BIO) {
                    html += '<div style="display: flex; align-items: center; margin-top: 25px; margin-bottom: 25px;">\n';
                    html += '    <span style="color: #333333;"><img style="width: 80px; height: 80px; border-radius: 50%; margin-right: 15px;" src="https://revolutiontradingpros.com/wp-content/uploads/2025/05/Billy-no-grey-768x768.png.webp" alt="Photo of Billy Ribeiro" /></span>\n';
                    html += '    <div>\n';
                    html += '        <span style="font-style: italic; color: #333333;"><strong>By Billy Ribeiro | Globally Recognized Trader &amp; Market Strategist</strong></span>\n';
                    html += '        <p style="margin: 8px 0 0 0; color: #333333; font-size: 14px;">' + tags.AUTHOR_BIO + '</p>\n';
                    html += '    </div>\n';
                    html += '</div>\n';
                } else {
                    // Use default bio
                    html += '<div style="display: flex; align-items: center; margin-top: 25px; margin-bottom: 25px;">\n';
                    html += '    <span style="color: #333333;"><img style="width: 80px; height: 80px; border-radius: 50%; margin-right: 15px;" src="https://revolutiontradingpros.com/wp-content/uploads/2025/05/Billy-no-grey-768x768.png.webp" alt="Photo of Billy Ribeiro" /></span>\n';
                    html += '    <span style="font-style: italic; color: #333333;"><strong>By Billy Ribeiro | Globally Recognized Trader &amp; Market Strategist</strong></span>\n';
                    html += '</div>\n';
                    html += '<span style="color: #333333;"><strong>Billy Ribeiro</strong> is a globally recognized trader renowned for his mastery of price action analysis and innovative trading strategies. He was personally mentored by Mark McGoldrick, famously known as "Goldfinger," Goldman Sachs\'s most successful investor in history. McGoldrick described Billy Ribeiro as "The Future of Trading," a testament to his extraordinary talent. His groundbreaking system, "The Move Prior to The Move," enables him to anticipate market trends with unmatched accuracy, establishing him as a true pioneer in the trading world.</span>\n';
                }
                
                // Add social links
                html += '<div style="display: flex; align-items: center; gap: 15px; margin-top: 0px; margin-bottom: 0px;">\n\n';
                html += '<span style="display: inline-flex; align-items: center; font-weight: bold;">\n';
                html += 'Connect with Billy:\n';
                html += '</span>\n\n';
                html += '<!-- LinkedIn -->\n';
                html += '<a style="display: inline-flex; align-items: center; text-decoration: none; color: #0077b5; font-size: 24px;" href="YOUR_LINKEDIN_URL" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">\n';
                html += '<i class="fab fa-linkedin"></i>\n';
                html += '</a>\n\n';
                html += '<!-- X (Twitter) -->\n';
                html += '<a style="display: inline-flex; align-items: center; text-decoration: none; color: #000000; font-size: 24px;" href="https://x.com/RevTradingPros" target="_blank" rel="noopener noreferrer" aria-label="X">\n';
                html += '<i class="fab fa-x-twitter"></i>\n';
                html += '</a>\n\n';
                html += '<!-- YouTube -->\n';
                html += '<a style="display: inline-flex; align-items: center; text-decoration: none; color: #ff0000; font-size: 24px;" href="https://bit.ly/3YmfilF" target="_blank" rel="noopener noreferrer" aria-label="YouTube">\n';
                html += '<i class="fab fa-youtube"></i>\n';
                html += '</a>\n\n';
                html += '<!-- Facebook -->\n';
                html += '<a style="display: inline-flex; align-items: center; text-decoration: none; color: #1877f2; font-size: 24px;" href="https://bit.ly/3OJ9z6g" target="_blank" rel="noopener noreferrer" aria-label="Facebook">\n';
                html += '<i class="fab fa-facebook"></i>\n';
                html += '</a>\n\n';
                html += '<!-- Instagram -->\n';
                html += '<a style="display: inline-flex; align-items: center; text-decoration: none; color: #e4405f; font-size: 24px;" href="https://bit.ly/3KW0zsb" target="_blank" rel="noopener noreferrer" aria-label="Instagram">\n';
                html += '<i class="fab fa-instagram"></i>\n';
                html += '</a>\n';
                html += '</div>' + audioHTML + '\n';
                
                // Add EXECUTIVE SUMMARY/TLDR if present
                if (tags.EXECUTIVE_SUMMARY_TLDR) {
                    html += '<!-- EXECUTIVE SUMMARY / TLDR -->\n';
                    html += '<div style="background: linear-gradient(135deg, #e8f4fd 0%, #f0f8ff 100%); border-left: 4px solid #2196f3; padding: 24px; margin: 30px 0; border-radius: 12px;">\n';
                    html += '    <h3 style="margin-top: 0; color: #1976d2;">üìå The Bottom Line (TLDR)</h3>\n';
                    html += '    <p style="font-size: 16px; color: #333333; margin: 0;">' + tags.EXECUTIVE_SUMMARY_TLDR + '</p>\n';
                    html += '</div>\n';
                }
                
                // Add Key Takeaways
                html += '<div style="background-color: #f7faff; border: 1px solid #cce0ff; padding: 20px 25px; margin: 30px 0; border-radius: 12px;">\n';
                html += '<h3 style="margin-top: 0;"><span style="color: #333333; font-family: Montserrat;">Billy\'s Key Takeaways</span></h3>\n';
                html += '<p style="font-style: italic; margin-bottom: 15px;"><span style="color: #333333; font-family: Montserrat;">"After 15+ years of trading and mentoring thousands of traders, here\'s what I wish every trader understood from day one:"</span></p>\n\n';
                html += '<ul>\n';
                
                // Add takeaways
                for (let i = 1; i <= 6; i++) {
                    const takeaway = tags['TAKEAWAY_' + i];
                    if (takeaway) {
                        const parts = takeaway.split(' | ');
                        html += ' 	<li><span style="color: #333333; font-family: Montserrat;"><strong>' + parts[0] + '</strong> ' + (parts[1] || '') + '</span></li>\n';
                    }
                }
                
                html += '</ul>\n';
                html += '</div>\n';
                
                // Add main content sections with NEW E-E-A-T elements
                for (let i = 1; i <= 5; i++) {
                    const h2 = tags['SECTION_' + i + '_H2'];
                    const content = tags['SECTION_' + i + '_CONTENT'];
                    
                    if (h2 && content) {
                        html += '<h2 style="margin-top: 40px;"><span style="color: #333333; font-family: Montserrat;">' + h2 + '</span></h2>\n';
                        html += processSection(content) + '\n';
                        
                        // Add optional E-E-A-T elements for each section
                        // Who this is for
                        if (tags['SECTION_' + i + '_WHO_FOR']) {
                            html += '<div style="background-color: #e8f9ff; border-left: 4px solid #17a2b8; padding: 15px; margin: 20px 0; border-radius: 8px;">\n';
                            html += '    <p style="margin: 0; color: #0c5460;"><strong>üìå Who This Is For (And NOT For):</strong><br>\n';
                            html += '    ' + tags['SECTION_' + i + '_WHO_FOR'] + '</p>\n';
                            html += '</div>\n';
                        }
                        
                        // Billy's Rule
                        if (tags['BILLY_RULE_' + i]) {
                            html += '<div style="background-color: #fff4e5; border-left: 4px solid #ff6b35; padding: 15px; margin: 20px 0; border-radius: 8px;">\n';
                            html += '    <p style="margin: 0; color: #8b3a00;"><strong>üéØ Billy\'s Rule #' + i + ':</strong> ' + tags['BILLY_RULE_' + i] + '</p>\n';
                            html += '</div>\n';
                        }
                        
                        // Trade Example
                        if (tags['TRADE_EXAMPLE_' + i]) {
                            html += '<div style="background-color: #f0f4f8; border: 1px solid #d6d6d6; padding: 20px; margin: 20px 0; border-radius: 10px;">\n';
                            html += '    <h4 style="margin-top: 0; color: #333;">üìä Real Trade Example:</h4>\n';
                            html += '    <p style="color: #333; font-family: \'Monaco\', \'Courier New\', monospace; font-size: 14px;">' + tags['TRADE_EXAMPLE_' + i] + '</p>\n';
                            html += '</div>\n';
                        }
                        
                        // Risk Management
                        if (tags['SECTION_' + i + '_RISK']) {
                            html += '<div style="background-color: #ffe6e6; border-left: 4px solid #dc3545; padding: 15px; margin: 20px 0; border-radius: 8px;">\n';
                            html += '    <p style="margin: 0; color: #721c24;"><strong>‚ö†Ô∏è Risk Management:</strong> ' + tags['SECTION_' + i + '_RISK'] + '</p>\n';
                            html += '</div>\n';
                        }
                        
                        // Common Mistakes
                        if (tags['SECTION_' + i + '_MISTAKES']) {
                            html += '<div style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; border-radius: 8px;">\n';
                            html += '    <p style="margin: 0; color: #856404;"><strong>‚ùå Common Mistakes to Avoid:</strong><br>\n';
                            html += '    ' + tags['SECTION_' + i + '_MISTAKES'] + '</p>\n';
                            html += '</div>\n';
                        }
                        
                        // Data Points
                        if (tags['DATA_POINT_' + i]) {
                            html += '<div style="background-color: #e7f3ff; border-left: 4px solid #007bff; padding: 15px; margin: 20px 0; border-radius: 8px;">\n';
                            html += '    <p style="margin: 0; color: #004085;"><strong>üìà Key Data:</strong> ' + tags['DATA_POINT_' + i] + '</p>\n';
                            html += '</div>\n';
                        }
                        
                        // Add recommended image
                        html += '<!-- RECOMMENDED IMAGE ' + i + ' -->\n';
                        html += '<div style="background: #f0f0f0; border: 2px dashed #666; padding: 20px; margin: 30px 0; text-align: center; border-radius: 8px;">\n';
                        html += '    <p style="font-weight: bold; color: #333;">üì∑ RECOMMENDED IMAGE ' + i + '</p>\n';
                        html += '    <p style="color: #666;">Title: ' + (h2 || 'Section ' + i + ' Image') + '</p>\n';
                        html += '    <p style="color: #666;">Alt Text: ' + slug + '-section-' + i + '</p>\n';
                        html += '    <p style="color: #666; font-style: italic;">Description: ' + (tags['VISUAL_ELEMENT_' + i] || 'Create a chart, screenshot, or infographic that illustrates the concepts discussed in this section') + '</p>\n';
                        html += '</div>\n';
                        
                        // Add Billy's Take after sections 2, 3, and 4
                        if (i >= 2 && i <= 4) {
                            const takeIndex = i - 1;
                            const take = tags['BILLY_TAKE_' + takeIndex];
                            if (take) {
                                html += '<div style="background-color: #f7f7f7; border-left: 4px solid #3366ff; padding: 15px; margin: 20px 0; font-style: italic; border-radius: 8px;">\n';
                                html += '    <span style="color: #333333; font-family: Montserrat;"><strong>Billy\'s Take:</strong></span>\n';
                                html += '    <span style="color: #333333; font-family: Montserrat;">"' + take + '"</span>\n';
                                html += '</div>\n';
                            }
                        }
                    }
                }
                
                // Add Scaling Roadmap if present
                if (tags.SCALING_ROADMAP) {
                    html += '<div style="background: linear-gradient(135deg, #f0f8ff 0%, #e8f4fd 100%); border: 2px solid #3366ff; padding: 25px; margin: 30px 0; border-radius: 12px;">\n';
                    html += '    <h3 style="margin-top: 0; color: #3366ff;">üìà Your Scaling Roadmap</h3>\n';
                    html += '    <p style="color: #333333;">' + tags.SCALING_ROADMAP + '</p>\n';
                    html += '</div>\n';
                }
                
                // Add Deep Dive if present
                if (tags.BILLY_DEEP_DIVE) {
                    html += '<div style="background-color: #f7faff; border: 1px solid #cce0ff; border-left: 4px solid #3366ff; padding: 20px 25px; margin: 30px 0; border-radius: 15px;">\n';
                    html += '    <h3 style="margin-top: 0;"><span style="color: #333333; font-family: Montserrat;">Billy\'s Deep Dive</span></h3>\n';
                    html += '    <span style="color: #333333; font-family: Montserrat;">' + tags.BILLY_DEEP_DIVE + '</span>\n';
                    html += '</div>\n';
                }
                
                // Add Critical Warning if present
                if (tags.CRITICAL_WARNING) {
                    const warningParts = tags.CRITICAL_WARNING.split(' | ');
                    html += '<div style="background-color: #fffbe6; border-left: 4px solid #c0392b; padding: 15px; margin: 20px 0; font-style: italic; border-radius: 8px;">\n';
                    html += '    <p style="color: #c0392b; font-weight: bold; margin: 0;">\n';
                    html += '        <span style="color: #333333; font-family: Montserrat;">‚ö†Ô∏è ' + warningParts[0] + ': ' + (warningParts[1] || '') + '</span>\n';
                    html += '    </p>\n';
                    html += '</div>\n';
                }
                
                // Add Personal Evolution if present
                if (tags.PERSONAL_EVOLUTION) {
                    html += '<div style="background-color: #f7faff; border: 1px solid #cce0ff; border-left: 4px solid #3366ff; padding: 20px 25px; margin: 30px 0; border-radius: 15px;">\n';
                    html += '    <h3 style="margin-top: 0;"><span style="color: #333333; font-family: Montserrat;">My Personal Evolution</span></h3>\n';
                    html += '    <span style="color: #333333; font-family: Montserrat;">' + tags.PERSONAL_EVOLUTION + '</span>\n';
                    html += '</div>\n';
                }
                
                // Add Continue Your Learning section (keep existing)
                html += '<h2><span style="color: #333333; font-family: Montserrat;">Continue Your Learning</span></h2>\n';
                html += '<div style="display: flex; flex-direction: column; gap: 20px; margin-bottom: 30px;">\n';
                html += '<a href="https://revolutiontradingpros.com/risk-management-essentials/" style="text-decoration: none; color: inherit;">\n';
                html += '<div style="display: flex; gap: 15px; padding: 20px; border: 1px solid #e0e0e0; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.3s ease; cursor: pointer; align-items: center;" onmouseover="this.style.transform=\'translateY(-5px)\'; this.style.boxShadow=\'0 8px 16px rgba(0,0,0,0.15)\'; this.style.borderColor=\'#c0392b\'" onmouseout="this.style.transform=\'translateY(0)\'; this.style.boxShadow=\'0 2px 4px rgba(0,0,0,0.1)\'; this.style.borderColor=\'#e0e0e0\'">\n';
                html += '<span style="color: #333333;"><img style="width: 100px; height: 100px; border-radius: 6px;" src="https://placehold.co/100x100/c0392b/ffffff?text=Risk" alt="Risk Management Essentials" /></span>\n';
                html += '<div style="flex: 1;">\n';
                html += '<h3 style="margin: 0 0 8px 0; color: #333; font-size: 1.2em;"><span style="color: #333333;">Risk Management Essentials for Active Traders</span></h3>\n';
                html += '<p style="margin: 0; color: #666; font-size: 0.95em; line-height: 1.5;"><span style="color: #333333;">Learn the core principles of risk management, including position sizing and setting effective stop-losses to protect your capital.</span></p>\n';
                html += '</div>\n';
                html += '</div>\n';
                html += '</a>\n';
                html += '<a href="https://revolutiontradingpros.com/technical-analysis-introduction/" style="text-decoration: none; color: inherit;">\n';
                html += '<div style="display: flex; gap: 15px; padding: 20px; border: 1px solid #e0e0e0; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.3s ease; cursor: pointer; align-items: center;" onmouseover="this.style.transform=\'translateY(-5px)\'; this.style.boxShadow=\'0 8px 16px rgba(0,0,0,0.15)\'; this.style.borderColor=\'#3366ff\'" onmouseout="this.style.transform=\'translateY(0)\'; this.style.boxShadow=\'0 2px 4px rgba(0,0,0,0.1)\'; this.style.borderColor=\'#e0e0e0\'">\n';
                html += '<span style="color: #333333;"><img style="width: 100px; height: 100px; border-radius: 6px;" src="https://placehold.co/100x100/3366ff/ffffff?text=Tech" alt="Technical Analysis" /></span>\n';
                html += '<div style="flex: 1;">\n';
                html += '<h3 style="margin: 0 0 8px 0; color: #333; font-size: 1.2em;"><span style="color: #333333;">An Introduction to Technical Analysis</span></h3>\n';
                html += '<p style="margin: 0; color: #666; font-size: 0.95em; line-height: 1.5;"><span style="color: #333333;">Discover how to read charts, identify trends, and use technical indicators to improve your trade timing and execution.</span></p>\n';
                html += '</div>\n';
                html += '</div>\n';
                html += '</a>\n';
                html += '<a href="https://revolutiontradingpros.com/trading-psychology/" style="text-decoration: none; color: inherit;">\n';
                html += '<div style="display: flex; gap: 15px; padding: 20px; border: 1px solid #e0e0e0; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.3s ease; cursor: pointer; align-items: center;" onmouseover="this.style.transform=\'translateY(-5px)\'; this.style.boxShadow=\'0 8px 16px rgba(0,0,0,0.15)\'; this.style.borderColor=\'#27ae60\'" onmouseout="this.style.transform=\'translateY(0)\'; this.style.boxShadow=\'0 2px 4px rgba(0,0,0,0.1)\'; this.style.borderColor=\'#e0e0e0\'">\n';
                html += '<span style="color: #333333;"><img style="width: 100px; height: 100px; border-radius: 6px;" src="https://placehold.co/100x100/27ae60/ffffff?text=Mind" alt="Trading Psychology" /></span>\n';
                html += '<div style="flex: 1;">\n';
                html += '<h3 style="margin: 0 0 8px 0; color: #333; font-size: 1.2em;"><span style="color: #333333;">The Psychology of Successful Trading</span></h3>\n';
                html += '<p style="margin: 0; color: #666; font-size: 0.95em; line-height: 1.5;"><span style="color: #333333;">Master the mental game of trading by understanding emotional control, discipline, and the psychological factors that impact trading decisions.</span></p>\n';
                html += '</div>\n';
                html += '</div>\n';
                html += '</a>\n';
                html += '</div>\n\n';
                
                // Add External Resources Table
                html += '<!-- RECOMMENDED EXTERNAL RESOURCES TABLE -->\n';
                html += '<h2 style="margin-top: 40px;"><span style="color: #333333; font-family: Montserrat;">Recommended External Resources</span></h2>\n';
                
                if (tags.RESOURCES_TABLE) {
                    html += '<div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 25px 0;">\n';
                    html += '    ' + processSection(tags.RESOURCES_TABLE) + '\n';
                    html += '</div>\n';
                } else {
                    // Default resources table
                    html += '<table style="width: 100%; border-collapse: collapse; margin: 25px 0; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">\n';
                    html += '<thead style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);">\n';
                    html += '<tr>\n';
                    html += '<th style="border: 1px solid #dddddd; text-align: left; padding: 15px; font-weight: 600;"><span style="color: #333333; font-family: Montserrat;">Topic</span></th>\n';
                    html += '<th style="border: 1px solid #dddddd; text-align: left; padding: 15px; font-weight: 600;"><span style="color: #333333; font-family: Montserrat;">Resource</span></th>\n';
                    html += '<th style="border: 1px solid #dddddd; text-align: left; padding: 15px; font-weight: 600;"><span style="color: #333333; font-family: Montserrat;">Why It Matters</span></th>\n';
                    html += '</tr>\n';
                    html += '</thead>\n';
                    html += '<tbody>\n';
                    html += '<tr style="transition: background-color 0.2s ease;">\n';
                    html += '<td style="border: 1px solid #dddddd; text-align: left; padding: 15px;"><span style="color: #333333; font-family: Montserrat;"><strong>Official Education</strong></span></td>\n';
                    html += '<td style="border: 1px solid #dddddd; text-align: left; padding: 15px;"><span style="color: #3366ff; font-family: Montserrat;"><a style="color: #3366ff; text-decoration: none; font-weight: 500;" href="https://www.cboe.com/education/" target="_blank" rel="noopener noreferrer">CBOE Options Institute</a></span></td>\n';
                    html += '<td style="border: 1px solid #dddddd; text-align: left; padding: 15px;"><span style="color: #333333; font-family: Montserrat;">Free comprehensive options education from the largest U.S. options exchange.</span></td>\n';
                    html += '</tr>\n';
                    html += '<tr style="transition: background-color 0.2s ease;">\n';
                    html += '<td style="border: 1px solid #dddddd; text-align: left; padding: 15px;"><span style="color: #333333; font-family: Montserrat;"><strong>Regulatory Guidance</strong></span></td>\n';
                    html += '<td style="border: 1px solid #dddddd; text-align: left; padding: 15px;"><span style="color: #3366ff; font-family: Montserrat;"><a style="color: #3366ff; text-decoration: none; font-weight: 500;" href="https://www.sec.gov/education" target="_blank" rel="noopener noreferrer">SEC Investor Education</a></span></td>\n';
                    html += '<td style="border: 1px solid #dddddd; text-align: left; padding: 15px;"><span style="color: #333333; font-family: Montserrat;">Understanding trading regulations and investor protection from the official source.</span></td>\n';
                    html += '</tr>\n';
                    html += '<tr style="transition: background-color 0.2s ease;">\n';
                    html += '<td style="border: 1px solid #dddddd; text-align: left; padding: 15px;"><span style="color: #333333; font-family: Montserrat;"><strong>Market Data</strong></span></td>\n';
                    html += '<td style="border: 1px solid #dddddd; text-align: left; padding: 15px;"><span style="color: #3366ff; font-family: Montserrat;"><a style="color: #3366ff; text-decoration: none; font-weight: 500;" href="https://www.cmegroup.com/education.html" target="_blank" rel="noopener noreferrer">CME Group Education</a></span></td>\n';
                    html += '<td style="border: 1px solid #dddddd; text-align: left; padding: 15px;"><span style="color: #333333; font-family: Montserrat;">Learn about futures markets and market mechanics from the world\'s leading derivatives marketplace.</span></td>\n';
                    html += '</tr>\n';
                    html += '</tbody>\n';
                    html += '</table>\n';
                }
                
                // FAQ Section
                html += '<h2 style="margin-top: 40px;"><span style="color: #333333; font-family: Montserrat;">Frequently Asked Questions</span></h2>\n';
                
                // Add FAQ items
                for (let i = 1; i <= 10; i++) {
                    const q = tags['FAQ_Q' + i];
                    const a = tags['FAQ_A' + i];
                    if (q && a) {
                        html += '<span style="color: #333333; font-family: Montserrat;"><strong>Q: ' + q + '</strong></span>\n';
                        html += '<span style="color: #333333; font-family: Montserrat;">A: ' + a + '</span>\n\n';
                    }
                }
                
                // Newsletter signup
                html += '<h3 style="text-align: center;"><span style="color: #333333; font-family: Montserrat; font-size: 24px;">Get Our Trading Cheat Sheet Direct to Your Inbox</span></h3>\n';
                html += '<span style="color: #333333;">[elementor-template id="44911"]</span>\n\n';
                
                // Share This Post Section
                html += '<!-- Share This Post Section -->\n';
                html += '<div style="margin: 40px auto; max-width: 800px; padding: 30px; background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%); border-radius: 15px; border: 1px solid #e0e0e0; text-align: center;">\n';
                html += '<h3 style="margin: 0 0 10px 0; color: #333333; font-family: Montserrat; font-size: 1.3em;">Found this helpful? Share it with fellow traders!</h3>\n';
                html += '<p style="margin: 0 0 25px 0; color: #666; font-family: Montserrat; font-size: 0.9em;">Help others improve their trading</p>\n\n';
                html += '<div style="display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; align-items: center;">\n';
                html += '<a style="display: inline-flex; align-items: center; justify-content: center; gap: 6px; padding: 12px 20px; background-color: #000000; color: #ffffff; text-decoration: none; border-radius: 8px; font-family: Montserrat; font-size: 14px; font-weight: 500; transition: all 0.3s ease; min-width: 180px; height: 44px; box-sizing: border-box;" href="https://twitter.com/intent/tweet?text=' + encodeURIComponent(tags.TITLE || 'Check this out') + '&amp;url=https://revolutiontradingpros.com/' + slug + '/" target="_blank" rel="noopener noreferrer" onmouseover="this.style.transform=\'translateY(-3px)\'; this.style.boxShadow=\'0 6px 16px rgba(0,0,0,0.2)\'" onmouseout="this.style.transform=\'translateY(0)\'; this.style.boxShadow=\'none\'">\n';
                html += '<span style="font-size: 16px; line-height: 1;">ùïè</span> Share on X\n';
                html += '</a>\n';
                html += '<a style="display: inline-flex; align-items: center; justify-content: center; gap: 6px; padding: 12px 20px; background-color: #0077b5; color: #ffffff; text-decoration: none; border-radius: 8px; font-family: Montserrat; font-size: 14px; font-weight: 500; transition: all 0.3s ease; min-width: 180px; height: 44px; box-sizing: border-box;" href="https://www.linkedin.com/sharing/share-offsite/?url=https://revolutiontradingpros.com/' + slug + '/" target="_blank" rel="noopener noreferrer" onmouseover="this.style.transform=\'translateY(-3px)\'; this.style.boxShadow=\'0 6px 16px rgba(0,119,181,0.3)\'; this.style.backgroundColor=\'#005885\'" onmouseout="this.style.transform=\'translateY(0)\'; this.style.boxShadow=\'none\'; this.style.backgroundColor=\'#0077b5\'">\n';
                html += '<span style="font-size: 16px; font-weight: bold; line-height: 1;">in</span> Share on LinkedIn\n';
                html += '</a>\n';
                html += '<a style="display: inline-flex; align-items: center; justify-content: center; gap: 6px; padding: 12px 20px; background-color: #1877f2; color: #ffffff; text-decoration: none; border-radius: 8px; font-family: Montserrat; font-size: 14px; font-weight: 500; transition: all 0.3s ease; min-width: 180px; height: 44px; box-sizing: border-box;" href="https://www.facebook.com/sharer/sharer.php?u=https://revolutiontradingpros.com/' + slug + '/" target="_blank" rel="noopener noreferrer" onmouseover="this.style.transform=\'translateY(-3px)\'; this.style.boxShadow=\'0 6px 16px rgba(24,119,242,0.3)\'; this.style.backgroundColor=\'#1264d1\'" onmouseout="this.style.transform=\'translateY(0)\'; this.style.boxShadow=\'none\'; this.style.backgroundColor=\'#1877f2\'">\n';
                html += '<span style="font-size: 16px; font-weight: bold; line-height: 1;">f</span> Share on Facebook\n';
                html += '</a>\n';
                html += '<a style="display: inline-flex; align-items: center; justify-content: center; gap: 6px; padding: 12px 20px; background-color: #6c757d; color: #ffffff; text-decoration: none; border-radius: 8px; font-family: Montserrat; font-size: 14px; font-weight: 500; transition: all 0.3s ease; min-width: 180px; height: 44px; box-sizing: border-box;" href="mailto:?subject=' + encodeURIComponent(tags.TITLE || 'Check this out') + '&amp;body=Check%20out%20this%20article:%20https://revolutiontradingpros.com/' + slug + '/" onmouseover="this.style.transform=\'translateY(-3px)\'; this.style.boxShadow=\'0 6px 16px rgba(108,117,125,0.3)\'; this.style.backgroundColor=\'#5a6268\'" onmouseout="this.style.transform=\'translateY(0)\'; this.style.boxShadow=\'none\'; this.style.backgroundColor=\'#6c757d\'">\n';
                html += '‚úâ Email to a Friend\n';
                html += '</a>\n';
                html += '<a style="display: inline-flex; align-items: center; justify-content: center; gap: 6px; padding: 12px 20px; background-color: #3366ff; color: #ffffff; text-decoration: none; border-radius: 8px; font-family: Montserrat; font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.3s ease; min-width: 180px; height: 44px; box-sizing: border-box;" href="javascript:void(0);" onclick="prompt(\'Copy this link:\', \'https://revolutiontradingpros.com/' + slug + '/\')" onmouseover="this.style.transform=\'translateY(-3px)\'; this.style.boxShadow=\'0 6px 16px rgba(51,102,255,0.3)\'; this.style.backgroundColor=\'#2952cc\'" onmouseout="this.style.transform=\'translateY(0)\'; this.style.boxShadow=\'none\'; this.style.backgroundColor=\'#3366ff\'">\n';
                html += 'üîó Copy Link\n';
                html += '</a>\n';
                html += '</div>\n';
                html += '</div>\n\n';
                
                // CTA Section with Trading Room Cards
                html += '<!-- CTA Section with light gray background -->\n';
                html += '<div style="margin-top: 40px; padding: 30px 20px; background-color: #f8f9fa; border-radius: 20px;">\n';
                html += '<h2 style="text-align: center;"><span style="color: #333333;">Start Trading Like a Professional</span></h2>\n';
                html += '<p style="text-align: center; color: #333333; max-width: 800px; margin: 0 auto 10px;">Ready to start trading like a professional? Join our community for in-depth analysis, expert strategy and live trading. Sign up today to start trading with a real edge!</p>\n';
                html += '<!-- Trading Room Cards -->\n';
                html += TRADING_ROOM_CARDS + '\n';
                html += '</div>\n\n';
                
                // Critical warning
                html += '<!-- Critical warning on WHITE background -->\n';
                html += '<div style="border: 1px solid #ccc; padding: 15px; margin-top: 40px; background-color: #fafafa; border-radius: 8px;">\n';
                html += '<p style="font-size: 0.9em; color: #555; text-align: center; margin: 0;"><span style="color: #333333;"><strong>CRITICAL:</strong> Trading involves substantial risk of loss and is not suitable for all investors. The content of this article is for educational purposes only and is not a recommendation to buy or sell any security. All trading strategies are used at your own risk.</span></p>\n';
                html += '</div>\n\n';
                
                // Logo
                html += '<!-- Logo on WHITE background -->\n';
                html += '<p style="text-align: center; margin-top: 30px;"><span style="color: #333333;"><img src="https://revolutiontradingpros.com/wp-content/uploads/2024/12/50baa458abe39958a6c1330df9ae980c-300x79.png" alt="Revolution Trading Pros Logo" width="300" height="79" /></span></p>\n';
                
                // Add Schema Markup notes if present
                if (tags.SCHEMA_MARKUP_NOTES) {
                    html += '\n<!-- SCHEMA MARKUP NOTES:\n';
                    html += tags.SCHEMA_MARKUP_NOTES + '\n';
                    html += '-->\n';
                }
                
                html += '\n</div>';
                
                document.getElementById('htmlOutput').value = html;
                document.getElementById('phase2Output').classList.add('show');
                document.getElementById('phase2Output').scrollIntoView({ behavior: 'smooth' });
                
                const statusMsg = audioUrl ? 
                    'E-E-A-T optimized HTML generated with ALL sections!' : 
                    'E-E-A-T optimized HTML generated! (Consider adding audio for better engagement)';
                
                showStatus('phase2Status', 'success', statusMsg);
                document.getElementById('phase2Badge').style.display = 'inline';
                
                autoSave();
                
            } catch (error) {
                console.error('Error in generateHTML:', error);
                showStatus('phase2Status', 'error', 'An error occurred. Please check your content and try again.');
            }
        }

        // All remaining functions stay the same
        // Copy content function
        function copyContent(elementId) {
            const textarea = document.getElementById(elementId);
            textarea.select();
            textarea.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                const message = elementId === 'promptOutput' ? 
                    'Prompt copied! Paste into Claude.ai' : 
                    'HTML copied! Paste into WordPress';
                showStatus(elementId === 'promptOutput' ? 'phase1Status' : 'phase2Status', 'success', message);
            } catch (err) {
                alert('Please select and copy manually');
            }
        }

        // Preview HTML
        function previewHTML() {
            const html = document.getElementById('htmlOutput').value;
            if (!html) {
                showStatus('phase2Status', 'error', 'Generate HTML first');
                return;
            }
            
            const previewFrame = document.getElementById('previewFrame');
            previewFrame.innerHTML = html;
            document.getElementById('previewModal').classList.add('show');
        }

        function closePreview() {
            document.getElementById('previewModal').classList.remove('show');
        }

        // Download functions
        function downloadPrompt() {
            const content = document.getElementById('promptOutput').value;
            downloadFile(content, 'athena-prompt.txt', 'text/plain');
        }

        function downloadHTML() {
            const html = document.getElementById('htmlOutput').value;
            downloadFile(html, 'blog-post.html', 'text/html');
        }

        function downloadFile(content, filename, type) {
            const blob = new Blob([content], { type: type });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
            
            showStatus('phase2Status', 'success', filename + ' downloaded!');
        }

        // Save/Load Draft Functions
        function saveDraft() {
            const draftName = prompt('Enter a name for this draft:');
            if (!draftName) return;
            
            const draft = {
                name: draftName,
                date: new Date().toISOString(),
                topic: document.getElementById('topic').value,
                keyword: document.getElementById('keyword').value,
                secondaryKeywords: document.getElementById('secondaryKeywords').value,
                longtailQuestions: document.getElementById('longtailQuestions').value,
                searchIntent: document.getElementById('searchIntent').value,
                competitorUrls: document.getElementById('competitorUrls').value,
                contentStyle: document.getElementById('contentStyle').value,
                targetLength: document.getElementById('targetLength').value,
                taggedContent: document.getElementById('taggedContent').value,
                slug: document.getElementById('slug').value,
                audioUrl: document.getElementById('audioUrl').value,
                promptOutput: document.getElementById('promptOutput').value,
                htmlOutput: document.getElementById('htmlOutput').value,
                includeExamples: document.getElementById('includeExamples').checked,
                includeRules: document.getElementById('includeRules').checked,
                includeWarnings: document.getElementById('includeWarnings').checked,
                includeData: document.getElementById('includeData').checked,
                includeVisuals: document.getElementById('includeVisuals').checked,
                includeScaling: document.getElementById('includeScaling').checked
            };
            const drafts = JSON.parse(localStorage.getItem('athenaDrafts') || '[]');
            drafts.push(draft);
            localStorage.setItem('athenaDrafts', JSON.stringify(drafts));
            
            showStatus('phase1Status', 'success', 'Draft saved successfully!');
            updateDraftsList();
        }

        function quickSave() {
            autoSave();
            showStatus('phase1Status', 'success', 'Auto-save completed!');
        }

        function autoSave() {
            const autoSave = {
                topic: document.getElementById('topic').value,
                keyword: document.getElementById('keyword').value,
                secondaryKeywords: document.getElementById('secondaryKeywords').value,
                longtailQuestions: document.getElementById('longtailQuestions').value,
                searchIntent: document.getElementById('searchIntent').value,
                competitorUrls: document.getElementById('competitorUrls').value,
                contentStyle: document.getElementById('contentStyle').value,
                targetLength: document.getElementById('targetLength').value,
                taggedContent: document.getElementById('taggedContent').value,
                slug: document.getElementById('slug').value,
                audioUrl: document.getElementById('audioUrl').value,
                includeExamples: document.getElementById('includeExamples').checked,
                includeRules: document.getElementById('includeRules').checked,
                includeWarnings: document.getElementById('includeWarnings').checked,
                includeData: document.getElementById('includeData').checked,
                includeVisuals: document.getElementById('includeVisuals').checked,
                includeScaling: document.getElementById('includeScaling').checked
            };
            
            localStorage.setItem('athenaAutoSave', JSON.stringify(autoSave));
        }

        function loadAutoSave() {
            const autoSave = JSON.parse(localStorage.getItem('athenaAutoSave') || '{}');
            
            if (autoSave.topic) document.getElementById('topic').value = autoSave.topic;
            if (autoSave.keyword) document.getElementById('keyword').value = autoSave.keyword;
            if (autoSave.secondaryKeywords) document.getElementById('secondaryKeywords').value = autoSave.secondaryKeywords;
            if (autoSave.longtailQuestions) document.getElementById('longtailQuestions').value = autoSave.longtailQuestions;
            if (autoSave.searchIntent) document.getElementById('searchIntent').value = autoSave.searchIntent;
            if (autoSave.competitorUrls) document.getElementById('competitorUrls').value = autoSave.competitorUrls;
            if (autoSave.contentStyle) document.getElementById('contentStyle').value = autoSave.contentStyle;
            if (autoSave.targetLength) document.getElementById('targetLength').value = autoSave.targetLength;
            if (autoSave.taggedContent) document.getElementById('taggedContent').value = autoSave.taggedContent;
            if (autoSave.slug) document.getElementById('slug').value = autoSave.slug;
            if (autoSave.audioUrl) document.getElementById('audioUrl').value = autoSave.audioUrl;
            
            // Load checkboxes
            if (autoSave.includeExamples !== undefined) document.getElementById('includeExamples').checked = autoSave.includeExamples;
            if (autoSave.includeRules !== undefined) document.getElementById('includeRules').checked = autoSave.includeRules;
            if (autoSave.includeWarnings !== undefined) document.getElementById('includeWarnings').checked = autoSave.includeWarnings;
            if (autoSave.includeData !== undefined) document.getElementById('includeData').checked = autoSave.includeData;
            if (autoSave.includeVisuals !== undefined) document.getElementById('includeVisuals').checked = autoSave.includeVisuals;
            if (autoSave.includeScaling !== undefined) document.getElementById('includeScaling').checked = autoSave.includeScaling;
        }

        function showDrafts() {
            const tabs = document.querySelectorAll('.phase-tab');
            switchPhase('phase3', { target: tabs[2] });
        }

        function updateDraftsList() {
            const drafts = JSON.parse(localStorage.getItem('athenaDrafts') || '[]');
            const draftsList = document.getElementById('draftsList');
            
            if (drafts.length === 0) {
                draftsList.innerHTML = '<p style="color: #666;">No saved drafts yet</p>';
                return;
            }
            
            let html = '';
            for (let i = 0; i < drafts.length; i++) {
                const draft = drafts[i];
                html += '<div class="draft-item">';
                html += '    <div>';
                html += '        <div class="draft-title">' + draft.name + '</div>';
                html += '        <div class="draft-date">' + new Date(draft.date).toLocaleString() + '</div>';
                html += '    </div>';
                html += '    <div class="draft-actions">';
                html += '        <button class="draft-btn load-draft" onclick="loadDraft(' + i + ')">Load</button>';
                html += '        <button class="draft-btn delete-draft" onclick="deleteDraft(' + i + ')">Delete</button>';
                html += '    </div>';
                html += '</div>';
            }
            
            draftsList.innerHTML = html;
        }

        function loadDraft(index) {
            const drafts = JSON.parse(localStorage.getItem('athenaDrafts') || '[]');
            const draft = drafts[index];
            
            if (!draft) return;
            
            document.getElementById('topic').value = draft.topic || '';
            document.getElementById('keyword').value = draft.keyword || '';
            document.getElementById('secondaryKeywords').value = draft.secondaryKeywords || '';
            document.getElementById('longtailQuestions').value = draft.longtailQuestions || '';
            document.getElementById('searchIntent').value = draft.searchIntent || '';
            document.getElementById('competitorUrls').value = draft.competitorUrls || '';
            document.getElementById('contentStyle').value = draft.contentStyle || 'conversational';
            document.getElementById('targetLength').value = draft.targetLength || '3500';
            document.getElementById('taggedContent').value = draft.taggedContent || '';
            document.getElementById('slug').value = draft.slug || '';
            document.getElementById('audioUrl').value = draft.audioUrl || '';
            document.getElementById('promptOutput').value = draft.promptOutput || '';
            document.getElementById('htmlOutput').value = draft.htmlOutput || '';
            
            // Load checkboxes
            if (draft.includeExamples !== undefined) document.getElementById('includeExamples').checked = draft.includeExamples;
            if (draft.includeRules !== undefined) document.getElementById('includeRules').checked = draft.includeRules;
            if (draft.includeWarnings !== undefined) document.getElementById('includeWarnings').checked = draft.includeWarnings;
            if (draft.includeData !== undefined) document.getElementById('includeData').checked = draft.includeData;
            if (draft.includeVisuals !== undefined) document.getElementById('includeVisuals').checked = draft.includeVisuals;
            if (draft.includeScaling !== undefined) document.getElementById('includeScaling').checked = draft.includeScaling;
            
            if (draft.promptOutput) {
                document.getElementById('phase1Output').classList.add('show');
            }
            if (draft.htmlOutput) {
                document.getElementById('phase2Output').classList.add('show');
            }
            
            showStatus('phase1Status', 'success', 'Draft "' + draft.name + '" loaded successfully!');
            const tabs = document.querySelectorAll('.phase-tab');
            switchPhase('phase1', { target: tabs[0] });
        }

        function deleteDraft(index) {
            if (!confirm('Are you sure you want to delete this draft?')) return;
            
            const drafts = JSON.parse(localStorage.getItem('athenaDrafts') || '[]');
            drafts.splice(index, 1);
            localStorage.setItem('athenaDrafts', JSON.stringify(drafts));
            
            updateDraftsList();
            showStatus('phase1Status', 'success', 'Draft deleted');
        }

        function clearAll() {
            if (!confirm('This will clear all fields. Are you sure?')) return;
            
            const fields = document.querySelectorAll('input[type="text"], input[type="url"], textarea');
            for (let i = 0; i < fields.length; i++) {
                fields[i].value = '';
            }
            
            document.getElementById('contentStyle').value = 'conversational';
            document.getElementById('targetLength').value = '3500';
            
            // Reset checkboxes to default
            document.getElementById('includeExamples').checked = true;
            document.getElementById('includeRules').checked = true;
            document.getElementById('includeWarnings').checked = true;
            document.getElementById('includeData').checked = true;
            document.getElementById('includeVisuals').checked = false;
            document.getElementById('includeScaling').checked = false;
            
            showStatus('phase1Status', 'info', 'All fields cleared');
        }

        // UPDATED SEO Analysis for E-E-A-T
        function analyzeSEO() {
            const html = document.getElementById('htmlOutput').value;
            if (!html) {
                showStatus('phase2Status', 'error', 'Generate HTML first');
                return;
            }
            
            const keyword = document.getElementById('keyword').value.trim().toLowerCase();
            const titleMatch = html.match(/<h1[^>]*>.*?<span[^>]*>(.*?)<\/span>/);
            const title = titleMatch ? titleMatch[1] : '';
            
            let score = 0;
            const tips = [];
            
            // E-E-A-T Checks
            
            // Check for TLDR/Executive Summary
            if (html.includes('The Bottom Line (TLDR)') || html.includes('EXECUTIVE_SUMMARY')) {
                score += 10;
                tips.push({ type: 'success', text: '‚úì Executive Summary/TLDR present (E-E-A-T)' });
            } else {
                tips.push({ type: 'error', text: '‚úó Add TLDR for better user experience' });
            }
            
            // Check for Disclaimer (YMYL)
            if (html.includes('‚ö†Ô∏è') && (html.includes('Not Financial Advice') || html.includes('DISCLAIMER'))) {
                score += 10;
                tips.push({ type: 'success', text: '‚úì Disclaimer present (YMYL compliance)' });
            } else {
                tips.push({ type: 'error', text: '‚úó Add disclaimer for YMYL content' });
            }
            
            // Check for Author Bio
            if (html.includes('By Billy Ribeiro') && (html.includes('15+ years') || html.includes('15 years'))) {
                score += 10;
                tips.push({ type: 'success', text: '‚úì Author bio with experience (E-E-A-T)' });
            } else {
                tips.push({ type: 'warning', text: '‚ö† Strengthen author credentials' });
            }
            
            // Check for Personal Evolution/Story
            if (html.includes('Personal Evolution') || html.includes('My journey')) {
                score += 10;
                tips.push({ type: 'success', text: '‚úì Personal story/experience shared' });
            } else {
                tips.push({ type: 'warning', text: '‚ö† Add personal experience for trust' });
            }
            
            // Check title for keyword
            if (title.toLowerCase().includes(keyword)) {
                score += 15;
                tips.push({ type: 'success', text: '‚úì Keyword in title' });
            } else {
                tips.push({ type: 'error', text: '‚úó Add keyword to title' });
            }
            
            // Check for trade examples
            const exampleCount = (html.match(/Real Trade Example/g) || []).length;
            if (exampleCount >= 2) {
                score += 10;
                tips.push({ type: 'success', text: '‚úì ' + exampleCount + ' trade examples with specifics' });
            } else {
                tips.push({ type: 'warning', text: '‚ö† Add more specific examples' });
            }
            
            // Check for risk warnings
            if (html.includes('Risk Management') || html.includes('Who This Is For')) {
                score += 10;
                tips.push({ type: 'success', text: '‚úì Risk warnings and qualifications' });
            } else {
                tips.push({ type: 'warning', text: '‚ö† Add risk management sections' });
            }
            
            // Check content length
            const contentLength = html.length;
            if (contentLength > 15000) {
                score += 10;
                tips.push({ type: 'success', text: '‚úì Comprehensive content length' });
            } else if (contentLength > 10000) {
                score += 5;
                tips.push({ type: 'warning', text: '‚ö† Good length, could be more comprehensive' });
            } else {
                tips.push({ type: 'error', text: '‚úó Content too short for E-E-A-T' });
            }
            
            // Check headings
            const h2Count = (html.match(/<h2/g) || []).length;
            if (h2Count >= 5) {
                score += 10;
                tips.push({ type: 'success', text: '‚úì Good structure with ' + h2Count + ' sections' });
            } else {
                tips.push({ type: 'warning', text: '‚ö† Add more sections for better structure' });
            }
            
            // Check FAQ section
            if (html.includes('Frequently Asked Questions')) {
                score += 5;
                tips.push({ type: 'success', text: '‚úì FAQ section included' });
            } else {
                tips.push({ type: 'error', text: '‚úó Add FAQ section' });
            }
            
            // Check for external resources
            if (html.includes('CBOE') || html.includes('SEC') || html.includes('CME')) {
                score += 10;
                tips.push({ type: 'success', text: '‚úì Authoritative external resources' });
            } else {
                tips.push({ type: 'warning', text: '‚ö† Add authoritative external links' });
            }
            
            // Update UI
            document.getElementById('seoScoreValue').textContent = score;
            document.getElementById('seoScoreLabel').textContent = 
                score >= 80 ? 'Excellent E-E-A-T & SEO' :
                score >= 60 ? 'Good E-E-A-T & SEO' :
                'Needs E-E-A-T Improvement';
            
            const scoreCircle = document.getElementById('seoScoreCircle');
            scoreCircle.className = 'score-circle ' + 
                (score >= 80 ? 'score-excellent' :
                 score >= 60 ? 'score-good' :
                 'score-poor');
            
            let tipsHTML = '';
            for (let i = 0; i < tips.length; i++) {
                tipsHTML += '<li class="seo-tip-item tip-' + tips[i].type + '">' + tips[i].text + '</li>';
            }
            document.getElementById('seoTips').innerHTML = tipsHTML;
            
            // Add E-E-A-T specific recommendations if score is low
            if (score < 80) {
                const existingDiv = document.getElementById('eatRecommendations');
                if (existingDiv) {
                    existingDiv.remove();
                }
                
                const eatTips = document.createElement('div');
                eatTips.id = 'eatRecommendations';
                eatTips.style.marginTop = '20px';
                eatTips.style.padding = '15px';
                eatTips.style.background = '#f0f8ff';
                eatTips.style.borderRadius = '8px';
                
                let recommendationsHTML = '<h5 style="color: #0066cc; margin-bottom: 10px;">üí° E-E-A-T Optimization Tips:</h5>';
                recommendationsHTML += '<ul style="margin: 0; padding-left: 20px; color: #333;">';
                
                if (score < 40) {
                    recommendationsHTML += '<li>Add specific dollar amounts and percentages to build credibility</li>';
                }
                if (!html.includes('TLDR')) {
                    recommendationsHTML += '<li>Add an executive summary at the top for busy readers</li>';
                }
                if (exampleCount < 2) {
                    recommendationsHTML += '<li>Include more real trade examples with math/calculations</li>';
                }
                if (!html.includes('Personal Evolution')) {
                    recommendationsHTML += '<li>Share a personal story about failures and breakthroughs</li>';
                }
                if (!html.includes('Billy\'s Rule')) {
                    recommendationsHTML += '<li>Add "Billy\'s Rules" to show expertise</li>';
                }
                
                recommendationsHTML += '</ul>';
                eatTips.innerHTML = recommendationsHTML;
                document.getElementById('seoTips').parentNode.appendChild(eatTips);
            }
        }

        // Helper functions
        function showHelp() {
            const helpText = 'ATHENA Pro Generator v3.0 - E-E-A-T Optimized\n\n' +
                'üéØ WHAT\'S NEW IN v3.0:\n' +
                '- E-E-A-T optimization for Google 2025\n' +
                '- Executive Summary/TLDR section\n' +
                '- Custom author bios\n' +
                '- Top-of-page disclaimers for YMYL\n' +
                '- Trade examples with calculations\n' +
                '- "Billy\'s Rules" for each strategy\n' +
                '- Risk management sections\n' +
                '- Personal evolution stories\n' +
                '- Enhanced keyword clustering\n\n' +
                'üìã PHASE 1: Generate E-E-A-T Prompt\n' +
                '- Enter complete keyword cluster (primary, secondary, long-tail)\n' +
                '- Configure advanced options for maximum E-E-A-T\n' +
                '- Generate prompt optimized for Experience, Expertise, Authority, Trust\n\n' +
                'üìù PHASE 2: Apply Template\n' +
                '- Paste ALL tagged content including new E-E-A-T tags\n' +
                '- System auto-extracts meta description\n' +
                '- Add audio for engagement boost\n' +
                '- Generate WordPress-ready HTML\n\n' +
                'üéØ PHASE 3: E-E-A-T Analysis\n' +
                '- Analyze your content for E-E-A-T signals\n' +
                '- Get specific optimization recommendations\n' +
                '- Preview your post before publishing\n\n' +
                'üí° TIPS FOR HIGH E-E-A-T:\n' +
                '- Always include specific examples with numbers\n' +
                '- Share personal stories (failures and successes)\n' +
                '- Add disclaimers for YMYL content\n' +
                '- Include authoritative external links\n' +
                '- Create comprehensive FAQ sections\n\n' +
                'üìä AUTO-SAVES:\n' +
                '- Every 30 seconds automatically\n' +
                '- Multiple draft management\n' +
                '- Never lose your work\n\n' +
                'Need help? Contact support@revolutiontradingpros.com';
            
            alert(helpText);
        }

        function showSettings() {
            const settingsText = 'Settings & Configuration\n\n' +
                'üîß CURRENT SETTINGS:\n' +
                '- Version: 3.0 Pro\n' +
                '- Auto-save: Enabled (30 seconds)\n' +
                '- E-E-A-T Mode: Active\n' +
                '- Target Market: Google 2025\n\n' +
                'üìÅ STORAGE:\n' +
                '- All drafts saved locally in browser\n' +
                '- Auto-save active\n' +
                '- Clear browser data will remove drafts\n\n' +
                'üéØ E-E-A-T DEFAULTS:\n' +
                '- Include Examples: ON\n' +
                '- Include Rules: ON\n' +
                '- Include Warnings: ON\n' +
                '- Include Data: ON\n' +
                '- Include Visuals: OFF\n' +
                '- Include Scaling: OFF\n\n' +
                'üíæ BACKUP:\n' +
                '- Use "Save Draft" regularly\n' +
                '- Download HTML files for backup\n' +
                '- Export prompts as .txt files\n\n' +
                'üîÑ UPDATES:\n' +
                '- Check for updates at revolutiontradingpros.com\n' +
                '- Current version optimized for 2025 SEO\n\n' +
                'For advanced settings, contact support.';
            
            alert(settingsText);
        }

        // Status messages
        function showStatus(elementId, type, message) {
            const statusEl = document.getElementById(elementId);
            statusEl.className = 'status show ' + type;
            statusEl.textContent = message;
            
            setTimeout(function() {
                statusEl.classList.remove('show');
            }, 5000);
        }

        // External links
        function openClaude() {
            window.open('https://claude.ai', '_blank');
        }
    </script>
</body>
</html>
